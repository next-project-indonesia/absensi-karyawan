<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup Admin</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script src="js/firebase-config.js" defer></script>
</head>
<body>
    <h2>Setup Admin Pertama</h2>
    <button onclick="createAdmin()">Buat Admin</button>
    
    <script>
        async function createAdmin() {
            try {
                // Buat user admin di Authentication
                const userCredential = await auth.createUserWithEmailAndPassword(
                    'admin@absensi.com', 
                    'Admin123!'
                );
                
                const adminUser = userCredential.user;
                
                // Simpan data admin di Firestore
                await db.collection('users').doc(adminUser.uid).set({
                    uid: adminUser.uid,
                    nip: 'ADMIN001',
                    nama: 'Super Administrator',
                    jabatan: 'Administrator',
                    alamat: 'Kantor Pusat',
                    noWhatsapp: '081234567890',
                    wilayah: 'Pusat',
                    email: 'admin@absensi.com',
                    role: 'admin',
                    passwordDisplay: 'Admin123!',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                alert('Admin berhasil dibuat!\nEmail: admin@absensi.com\nPassword: Admin123!');
                window.location.href = 'login.html';
                
            } catch (error) {
                console.error('Error creating admin:', error);
                alert('Error: ' + error.message);
            }
        }
    </script>
</body>
</html>
